{"message":"`DATABASE_URL` must be set to use query macros","code":null,"level":"error","spans":[{"file_name":"/Users/harris/.cargo/registry/src/github.com-1ecc6299db9ec823/sqlx-0.5.13/src/macros.rs","byte_start":15828,"byte_end":15899,"line_start":315,"line_end":315,"column_start":9,"column_end":80,"is_primary":true,"text":[{"text":"        $crate::sqlx_macros::expand_query!(source = $query, args = [$($args)*])","highlight_start":9,"highlight_end":80}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/harris/.cargo/registry/src/github.com-1ecc6299db9ec823/sqlx-0.5.13/src/macros.rs","byte_start":15828,"byte_end":15899,"line_start":315,"line_end":315,"column_start":9,"column_end":80,"is_primary":false,"text":[{"text":"        $crate::sqlx_macros::expand_query!(source = $query, args = [$($args)*])","highlight_start":9,"highlight_end":80}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"crates/upload-pokemon-data/src/db.rs","byte_start":6467,"byte_end":8877,"line_start":221,"line_end":309,"column_start":5,"column_end":6,"is_primary":false,"text":[{"text":"    sqlx::query!(","highlight_start":5,"highlight_end":18},{"text":"        r#\"","highlight_start":1,"highlight_end":12},{"text":"    INSERT INTO pokemon (","highlight_start":1,"highlight_end":26},{"text":"        id,","highlight_start":1,"highlight_end":12},{"text":"        slug,","highlight_start":1,"highlight_end":14},{"text":"        name,","highlight_start":1,"highlight_end":14},{"text":"        pokedex_id,","highlight_start":1,"highlight_end":20},{"text":"        hp,","highlight_start":1,"highlight_end":12},{"text":"        attack,","highlight_start":1,"highlight_end":16},{"text":"        defense,","highlight_start":1,"highlight_end":17},{"text":"        special_attack,","highlight_start":1,"highlight_end":24},{"text":"        special_defense,","highlight_start":1,"highlight_end":25},{"text":"        speed,","highlight_start":1,"highlight_end":15},{"text":"        height,","highlight_start":1,"highlight_end":16},{"text":"        weight,","highlight_start":1,"highlight_end":16},{"text":"        generation,","highlight_start":1,"highlight_end":20},{"text":"        female_rate,","highlight_start":1,"highlight_end":21},{"text":"        genderless,","highlight_start":1,"highlight_end":20},{"text":"        legendary_or_mythical,","highlight_start":1,"highlight_end":31},{"text":"        is_default,","highlight_start":1,"highlight_end":20},{"text":"        forms_switchable,","highlight_start":1,"highlight_end":26},{"text":"        base_experience,","highlight_start":1,"highlight_end":25},{"text":"        capture_rate,","highlight_start":1,"highlight_end":22},{"text":"        base_happiness,","highlight_start":1,"highlight_end":24},{"text":"        primary_color,","highlight_start":1,"highlight_end":23},{"text":"        number_pokemon_with_typing,","highlight_start":1,"highlight_end":36},{"text":"        normal_attack_effectiveness,","highlight_start":1,"highlight_end":37},{"text":"        fire_attack_effectiveness,","highlight_start":1,"highlight_end":35},{"text":"        water_attack_effectiveness,","highlight_start":1,"highlight_end":36},{"text":"        electric_attack_effectiveness,","highlight_start":1,"highlight_end":39},{"text":"        grass_attack_effectiveness,","highlight_start":1,"highlight_end":36},{"text":"        ice_attack_effectiveness,","highlight_start":1,"highlight_end":34},{"text":"        fighting_attack_effectiveness,","highlight_start":1,"highlight_end":39},{"text":"        poison_attack_effectiveness,","highlight_start":1,"highlight_end":37},{"text":"        ground_attack_effectiveness,","highlight_start":1,"highlight_end":37},{"text":"        fly_attack_effectiveness,","highlight_start":1,"highlight_end":34},{"text":"        psychic_attack_effectiveness,","highlight_start":1,"highlight_end":38},{"text":"        bug_attack_effectiveness,","highlight_start":1,"highlight_end":34},{"text":"        rock_attack_effectiveness,","highlight_start":1,"highlight_end":35},{"text":"        ghost_attack_effectiveness,","highlight_start":1,"highlight_end":36},{"text":"        dragon_attack_effectiveness,","highlight_start":1,"highlight_end":37},{"text":"        dark_attack_effectiveness,","highlight_start":1,"highlight_end":35},{"text":"        steel_attack_effectiveness,","highlight_start":1,"highlight_end":36},{"text":"        fairy_attack_effectiveness","highlight_start":1,"highlight_end":35},{"text":"     )","highlight_start":1,"highlight_end":7},{"text":"    VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)","highlight_start":1,"highlight_end":95},{"text":"        \"#,","highlight_start":1,"highlight_end":12},{"text":"        id,","highlight_start":1,"highlight_end":12},{"text":"        slug,","highlight_start":1,"highlight_end":14},{"text":"        name,","highlight_start":1,"highlight_end":14},{"text":"        pokedex_id,","highlight_start":1,"highlight_end":20},{"text":"        hp,","highlight_start":1,"highlight_end":12},{"text":"        attack,","highlight_start":1,"highlight_end":16},{"text":"        defense,","highlight_start":1,"highlight_end":17},{"text":"        special_attack,","highlight_start":1,"highlight_end":24},{"text":"        special_defense,","highlight_start":1,"highlight_end":25},{"text":"        speed,","highlight_start":1,"highlight_end":15},{"text":"        height,","highlight_start":1,"highlight_end":16},{"text":"        weight,","highlight_start":1,"highlight_end":16},{"text":"        generation,","highlight_start":1,"highlight_end":20},{"text":"        female_rate,","highlight_start":1,"highlight_end":21},{"text":"        genderless,","highlight_start":1,"highlight_end":20},{"text":"        legendary_or_mythical,","highlight_start":1,"highlight_end":31},{"text":"        is_default,","highlight_start":1,"highlight_end":20},{"text":"        forms_switchable,","highlight_start":1,"highlight_end":26},{"text":"        base_experience,","highlight_start":1,"highlight_end":25},{"text":"        capture_rate,","highlight_start":1,"highlight_end":22},{"text":"        base_happiness,","highlight_start":1,"highlight_end":24},{"text":"        primary_color,","highlight_start":1,"highlight_end":23},{"text":"        number_pokemon_with_typing,","highlight_start":1,"highlight_end":36},{"text":"        normal_attack_effectiveness,","highlight_start":1,"highlight_end":37},{"text":"        fire_attack_effectiveness,","highlight_start":1,"highlight_end":35},{"text":"        water_attack_effectiveness,","highlight_start":1,"highlight_end":36},{"text":"        electric_attack_effectiveness,","highlight_start":1,"highlight_end":39},{"text":"        grass_attack_effectiveness,","highlight_start":1,"highlight_end":36},{"text":"        ice_attack_effectiveness,","highlight_start":1,"highlight_end":34},{"text":"        fighting_attack_effectiveness,","highlight_start":1,"highlight_end":39},{"text":"        poison_attack_effectiveness,","highlight_start":1,"highlight_end":37},{"text":"        ground_attack_effectiveness,","highlight_start":1,"highlight_end":37},{"text":"        fly_attack_effectiveness,","highlight_start":1,"highlight_end":34},{"text":"        psychic_attack_effectiveness,","highlight_start":1,"highlight_end":38},{"text":"        bug_attack_effectiveness,","highlight_start":1,"highlight_end":34},{"text":"        rock_attack_effectiveness,","highlight_start":1,"highlight_end":35},{"text":"        ghost_attack_effectiveness,","highlight_start":1,"highlight_end":36},{"text":"        dragon_attack_effectiveness,","highlight_start":1,"highlight_end":37},{"text":"        dark_attack_effectiveness,","highlight_start":1,"highlight_end":35},{"text":"        steel_attack_effectiveness,","highlight_start":1,"highlight_end":36},{"text":"        fairy_attack_effectiveness,","highlight_start":1,"highlight_end":36},{"text":"    ).execute(pool).await","highlight_start":1,"highlight_end":6}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"sqlx::query!","def_site_span":{"file_name":"/Users/harris/.cargo/registry/src/github.com-1ecc6299db9ec823/sqlx-0.5.13/src/macros.rs","byte_start":14920,"byte_end":15909,"line_start":301,"line_end":317,"column_start":1,"column_end":3,"is_primary":false,"text":[{"text":"macro_rules! query (","highlight_start":1,"highlight_end":1},{"text":"    // in Rust 1.45 we can now invoke proc macros in expression position","highlight_start":1,"highlight_end":1},{"text":"    ($query:expr) => ({","highlight_start":1,"highlight_end":1},{"text":"        $crate::sqlx_macros::expand_query!(source = $query)","highlight_start":1,"highlight_end":1},{"text":"    });","highlight_start":1,"highlight_end":1},{"text":"    // RFC: this semantically should be `$($args:expr),*` (with `$(,)?` to allow trailing comma)","highlight_start":1,"highlight_end":1},{"text":"    // but that doesn't work in 1.45 because `expr` fragments get wrapped in a way that changes","highlight_start":1,"highlight_end":1},{"text":"    // their hygiene, which is fixed in 1.46 so this is technically just a temp. workaround.","highlight_start":1,"highlight_end":1},{"text":"    // My question is: do we care?","highlight_start":1,"highlight_end":1},{"text":"    // I was hoping using the `expr` fragment might aid code completion but it doesn't in my","highlight_start":1,"highlight_end":1},{"text":"    // experience, at least not with IntelliJ-Rust at the time of writing (version 0.3.126.3220-201)","highlight_start":1,"highlight_end":1},{"text":"    // so really the only benefit is making the macros _slightly_ self-documenting, but it's","highlight_start":1,"highlight_end":1},{"text":"    // not like it makes them magically understandable at-a-glance.","highlight_start":1,"highlight_end":1},{"text":"    ($query:expr, $($args:tt)*) => ({","highlight_start":1,"highlight_end":1},{"text":"        $crate::sqlx_macros::expand_query!(source = $query, args = [$($args)*])","highlight_start":1,"highlight_end":1},{"text":"    })","highlight_start":1,"highlight_end":1},{"text":");","highlight_start":1,"highlight_end":3}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::sqlx_macros::expand_query!","def_site_span":{"file_name":"/Users/harris/.cargo/registry/src/github.com-1ecc6299db9ec823/sqlx-macros-0.5.13/src/lib.rs","byte_start":538,"byte_end":592,"line_start":28,"line_end":28,"column_start":1,"column_end":55,"is_primary":false,"text":[{"text":"pub fn expand_query(input: TokenStream) -> TokenStream {","highlight_start":1,"highlight_end":55}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}}],"children":[],"rendered":"\u001b[0m\u001b[1m\u001b[38;5;9merror\u001b[0m\u001b[0m\u001b[1m: `DATABASE_URL` must be set to use query macros\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m--> \u001b[0m\u001b[0mcrates/upload-pokemon-data/src/db.rs:221:5\u001b[0m\n\u001b[0m    \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m221\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m| \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m/\u001b[0m\u001b[0m \u001b[0m\u001b[0m    sqlx::query!(\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m222\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m| \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m        r#\"\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m223\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m| \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m    INSERT INTO pokemon (\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m224\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m| \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m        id,\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m...\u001b[0m\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m308\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m| \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m        fairy_attack_effectiveness,\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m309\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m| \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m    ).execute(pool).await\u001b[0m\n\u001b[0m    \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m| \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|_____^\u001b[0m\n\u001b[0m    \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m    \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m= \u001b[0m\u001b[0m\u001b[1mnote\u001b[0m\u001b[0m: this error originates in the macro `$crate::sqlx_macros::expand_query` (in Nightly builds, run with -Z macro-backtrace for more info)\u001b[0m\n\n"}
{"message":"aborting due to previous error","code":null,"level":"error","spans":[],"children":[],"rendered":"\u001b[0m\u001b[1m\u001b[38;5;9merror\u001b[0m\u001b[0m\u001b[1m: aborting due to previous error\u001b[0m\n\n"}
